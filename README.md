# דשבורד ניתוח נסיעות ספקים

מערכת Web לניתוח והשוואת קבצי נסיעות עם התאמה לספקים, חלוקה מחלקתית, וייצוא דוחות Excel.

## תכונות

- **העלאת קבצים**: Drag & Drop להעלאת קבצי CSV ו-Excel
- **ניתוח התאמות**: השוואה בין קובץ רייד לקבצי ספקים (בון תור, חורי, גט)
- **חלוקה מחלקתית**: חישוב אוטומטי של חלוקת עלויות לפי מחלקות
- **ייצוא דוחות**: יצירת קבצי Excel נפרדים לכל מחלקה

## התקנה

```bash
npm install
```

## הפעלה

```bash
npm run dev
```

המערכת תרוץ על `http://localhost:5173` (או פורט אחר אם 5173 תפוס)

## מבנה הקבצים

המערכת תומכת בקבצים הבאים:

1. **קובץ רייד** (CSV): קובץ המכיל את כל הנסיעות מהמערכת
2. **בון תור** (Excel): קובץ Excel עם עמודות: מספר הזמנה, מחיר, תאריך
3. **חורי** (Excel): קובץ Excel עם עמודות: מספר נסיעה, מחיר, תאריך
4. **גט** (Excel): קובץ Excel (נתונים מתחילים משורה 16) עם עמודות: תאריך, שעה, מקור, יעד, נוסעים, מחיר
5. **מסד עובדים** (CSV): קובץ עם עמודות: _ID, שם פרטי, שם משפחה, מחלקה

## שימוש

1. העלה את כל הקבצים באמצעות אזורי ה-Drag & Drop
2. לחץ על כפתור "נתח" כדי להריץ את הניתוח
3. צפה בתוצאות בטבלאות האינטראקטיביות
4. ייצא דוחות Excel באמצעות הכפתורים הרלוונטיים

## לוגיקת התאמות

### בון תור ↔ רייד
התאמה לפי: `מספר הזמנה (בון תור) === ride_id (רייד)`

### חורי ↔ רייד
התאמה לפי: `מספר נסיעה (חורי) === ride_id (רייד)`

### גט ↔ רייד (התאמה חכמה)
- הפרש זמן ≤ 10 דקות
- מקור ויעד זהים
- לפחות נוסע אחד משותף

## חלוקה מחלקתית

המערכת מחלקת את עלות כל נסיעה לפי מספר העובדים מכל מחלקה:
- אם יש 2 עובדי "ציוד קרקע" ו-1 עובד "נעזרים" בנסיעה של 150₪
- אז "ציוד קרקע" ישלם: (2/3) × 150 = 100₪
- ו"נעזרים" ישלם: (1/3) × 150 = 50₪

## טכנולוגיות

- React
- TailwindCSS
- Vite
- SheetJS (xlsx)
- PapaParse
- JSZip
- Framer Motion
- PropTypes

## מבנה הקוד

```
src/
├── components/          # קומפוננטות React
│   ├── common/         # קומפוננטות משותפות (ErrorBoundary, LoadingSpinner)
│   └── AnalysisResults/ # קומפוננטות ניתוח תוצאות + hooks
├── hooks/              # Custom React hooks (useAnalysis, useFileUpload)
├── contexts/           # React Contexts לניהול state (מוכן לשימוש עתידי)
├── utils/              # פונקציות עזר
│   ├── matching/       # פונקציות התאמה (מוכן לשימוש עתידי)
│   ├── formatters/     # פונקציות עיצוב (מוכן לשימוש עתידי)
│   └── validators/     # פונקציות ולידציה (מוכן לשימוש עתידי)
└── types/              # הגדרות טיפוסים (מוכן לשימוש עתידי)
```

## פיתוח

### Linting ו-Formatting

```bash
# בדיקת שגיאות ESLint
npm run lint

# תיקון שגיאות ESLint אוטומטית
npm run lint:fix

# עיצוב קוד עם Prettier
npm run format

# בדיקת עיצוב קוד
npm run format:check
```

## רישיון

MIT
